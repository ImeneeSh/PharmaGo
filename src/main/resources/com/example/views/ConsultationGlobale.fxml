<?xml version="1.0" encoding="UTF-8"?>

<!-- Imports nécessaires pour les layouts et les contrôles JavaFX -->
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>

<!-- ==========================================================
     PAGE CONSULTATION GLOBALE
     Vue principale affichant les statistiques et sections dynamiques
     ========================================================== -->
<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.controllers.ConsultationGlobaleController"
            styleClass="root-consultation">

    <!-- ==================== MENU LATÉRAL GAUCHE ==================== -->
    <left>
        <fx:include source="Menu.fxml" />
    </left>

    <!-- ==================== CONTENU CENTRAL DÉFILABLE ==================== -->
    <!-- HBox pour créer l'espacement entre le menu et le contenu -->
    <center>
        <HBox spacing="0">
            <!-- Region invisible pour créer l'espacement de 3mm (≈12px) entre le menu et le contenu -->
            <Region prefWidth="12" style="-fx-background-color: #F9FAFB;" />

            <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER" style="-fx-background-color:transparent;" HBox.hgrow="ALWAYS">
                <VBox alignment="TOP_CENTER" spacing="40" styleClass="consultation-content" VBox.vgrow="ALWAYS">

                <!-- === EN-TÊTE DE LA PAGE === -->
                <VBox style="-fx-padding: 30 50 0 50;">
                    <Label text="Consultation global" styleClass="consultation-title" />
                    <Label text="Statistiques et analyses détaillées de votre activité" styleClass="consultation-subtitle" />
                </VBox>

                <!-- === CARTES DES MÉTRIQUES PRINCIPALES === -->
                <!-- HBox avec espacement flexible pour que les cartes s'ajustent avec la taille de la fenêtre -->
                <HBox spacing="20" alignment="CENTER" style="-fx-padding: 0 50 0 50;" HBox.hgrow="ALWAYS">
                    <!-- Carte 1: Total clients -->
                    <!-- HBox.hgrow="ALWAYS" permet à la carte de s'agrandir pour remplir l'espace disponible -->
                    <VBox styleClass="metric-card" HBox.hgrow="ALWAYS" alignment="CENTER">
                        <!-- HBox centré pour le titre et l'icône -->
                        <HBox alignment="CENTER" spacing="10">
                            <Label text="Total clients" styleClass="metric-card-title"/>
                            <ImageView fitWidth="24" fitHeight="24" preserveRatio="true">
                                <Image url="/assets/liste-des-utilisateurs.png"/>
                            </ImageView>
                        </HBox>
                        <Label text="350" styleClass="metric-card-number"/>
                        <Label text="+ 2 clients ce mois-ci" styleClass="metric-card-subtext"/>
                    </VBox>

                    <!-- Carte 2: Total médicaments -->
                    <VBox styleClass="metric-card" HBox.hgrow="ALWAYS" alignment="CENTER">
                        <!-- HBox centré pour le titre -->
                        <HBox alignment="CENTER" spacing="10">
                            <Label text="Total médicaments" styleClass="metric-card-title"/>
                        </HBox>
                        <Label text="150" styleClass="metric-card-number"/>
                        <Label text="+ 5 médicaments ce mois-ci" styleClass="metric-card-subtext"/>
                    </VBox>

                    <!-- Carte 3: Total livraisons -->
                    <VBox styleClass="metric-card" HBox.hgrow="ALWAYS" alignment="CENTER">
                        <!-- HBox centré pour le titre et l'icône -->
                        <HBox alignment="CENTER" spacing="10">
                            <Label text="Total livraisons" styleClass="metric-card-title"/>
                            <ImageView fitWidth="24" fitHeight="24" preserveRatio="true">
                                <Image url="/assets/livraison (1).png"/>
                            </ImageView>
                        </HBox>
                        <Label text="167" styleClass="metric-card-number"/>
                        <Label text="+ 70 livraisons ce mois-ci" styleClass="metric-card-subtext"/>
                    </VBox>
                </HBox>



                <!-- ==========================================================
     SECTION : LIVRAISONS PAR TYPE (INTERACTIVE)
     ========================================================== -->
                <VBox styleClass="section-container">
                    <Label text="Livraisons par type" styleClass="section-title"/>

                    <!-- === PANEL BLANC POUR LES BARRES DE PROGRESSION === -->
                    <VBox styleClass="delivery-progress-panel" spacing="20">
                        <!-- === Sous chaîne du froid === -->
                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label text="Sous chaîne du froid (2° - 8°)" styleClass="progress-label"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <!-- Label dynamique lié au controller -->
                                <Label fx:id="coldChainLabel" text="5 livraison(s)" styleClass="progress-value"/>
                            </HBox>
                            <!-- Barre de progression liée -->
                            <ProgressBar fx:id="coldChainBar" progress="0.65" styleClass="delivery-progress-bar" prefWidth="650"/>
                        </VBox>

                        <!-- === Sous congélation === -->
                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label text="Sous congélation (-20°)" styleClass="progress-label"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="frozenLabel" text="2 livraison(s)" styleClass="progress-value"/>
                            </HBox>
                            <ProgressBar fx:id="frozenBar" progress="0.35" styleClass="delivery-progress-bar" prefWidth="650"/>
                        </VBox>

                        <!-- === Dangereuses / cytotoxiques === -->
                        <VBox spacing="8">
                            <HBox alignment="CENTER_LEFT" spacing="10">
                                <Label text="Dangereuses / cytotoxiques" styleClass="progress-label"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <Label fx:id="dangerLabel" text="3 livraison(s)" styleClass="progress-value"/>
                            </HBox>
                            <ProgressBar fx:id="dangerBar" progress="0.45" styleClass="delivery-progress-bar" prefWidth="650"/>
                        </VBox>
                    </VBox>
                </VBox>


                <!-- ==========================================================
     SECTION : CLIENTS LES PLUS ACTIFS
     ========================================================== -->
                <VBox styleClass="section-container">
                    <Label text="Clients les plus actifs" styleClass="section-title"/>

                    <!-- === PANEL BLANC POUR LES CLIENTS === -->
                    <VBox fx:id="clientsContainer" styleClass="active-clients-panel" spacing="15">
                        <HBox styleClass="client-item" spacing="15">
                            <StackPane styleClass="rank-badge"><Label text="1" styleClass="rank-number"/></StackPane>
                            <VBox spacing="3" HBox.hgrow="ALWAYS">
                                <Label text="C001" styleClass="client-code"/>
                                <Label text="Djamel Debbag" styleClass="client-name"/>
                            </VBox>
                            <Label text="4" styleClass="client-value"/>
                        </HBox>

                        <HBox styleClass="client-item" spacing="15">
                            <StackPane styleClass="rank-badge"><Label text="2" styleClass="rank-number"/></StackPane>
                            <VBox spacing="3" HBox.hgrow="ALWAYS">
                                <Label text="C002" styleClass="client-code"/>
                                <Label text="Amina Berrabah" styleClass="client-name"/>
                            </VBox>
                            <Label text="3" styleClass="client-value"/>
                        </HBox>

                        <HBox styleClass="client-item" spacing="15">
                            <StackPane styleClass="rank-badge"><Label text="3" styleClass="rank-number"/></StackPane>
                            <VBox spacing="3" HBox.hgrow="ALWAYS">
                                <Label text="C003" styleClass="client-code"/>
                                <Label text="Mohamed Ali" styleClass="client-name"/>
                            </VBox>
                            <Label text="2" styleClass="client-value"/>
                        </HBox>
                    </VBox>
                </VBox>


                <!-- ==========================================================
     SECTION : MÉDICAMENTS LES PLUS LIVRÉS
     ========================================================== -->
                <VBox styleClass="section-container">
                    <Label text="Médicaments les plus livrés" styleClass="section-title"/>

                    <!-- Panneau blanc interne -->
                    <HBox styleClass="medication-panel" spacing="40" alignment="CENTER">
                        <!-- Colonne gauche -->
                        <VBox spacing="20" alignment="CENTER">
                            <VBox styleClass="medication-card">
                                <HBox alignment="TOP_RIGHT" HBox.hgrow="ALWAYS">
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <StackPane styleClass="medication-rank-badge"><Label text="1" styleClass="medication-rank-number"/></StackPane>
                                </HBox>
                                <Label text="M006" styleClass="medication-code"/>
                                <Label text="Paracétamol 500mg" styleClass="medication-name"/>
                                <Label text="Péremption: 31/12/2025" styleClass="medication-expiry"/>
                            </VBox>

                            <VBox styleClass="medication-card">
                                <HBox alignment="TOP_RIGHT" HBox.hgrow="ALWAYS">
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <StackPane styleClass="medication-rank-badge"><Label text="2" styleClass="medication-rank-number"/></StackPane>
                                </HBox>
                                <Label text="M007" styleClass="medication-code"/>
                                <Label text="Ibuprofène 200mg" styleClass="medication-name"/>
                                <Label text="Péremption: 15/11/2025" styleClass="medication-expiry"/>
                            </VBox>
                        </VBox>

                        <!-- Trait vertical noir -->
                        <Region styleClass="vertical-separator"/>

                        <!-- Colonne droite -->
                        <VBox spacing="20" alignment="CENTER">
                            <VBox styleClass="medication-card">
                                <HBox alignment="TOP_RIGHT" HBox.hgrow="ALWAYS">
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <StackPane styleClass="medication-rank-badge"><Label text="3" styleClass="medication-rank-number"/></StackPane>
                                </HBox>
                                <Label text="M008" styleClass="medication-code"/>
                                <Label text="Aspirine 500mg" styleClass="medication-name"/>
                                <Label text="Péremption: 20/12/2025" styleClass="medication-expiry"/>
                            </VBox>

                            <VBox styleClass="medication-card">
                                <HBox alignment="TOP_RIGHT" HBox.hgrow="ALWAYS">
                                    <Region HBox.hgrow="ALWAYS"/>
                                    <StackPane styleClass="medication-rank-badge"><Label text="4" styleClass="medication-rank-number"/></StackPane>
                                </HBox>
                                <Label text="M009" styleClass="medication-code"/>
                                <Label text="Doliprane 1000mg" styleClass="medication-name"/>
                                <Label text="Péremption: 10/01/2026" styleClass="medication-expiry"/>
                            </VBox>
                        </VBox>
                    </HBox>
                </VBox>



            </VBox>
        </ScrollPane>
        </HBox>
    </center>
</BorderPane>
